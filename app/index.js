const _0x51ea01=_0x2a3d;function _0x57d2(){const _0x5f2cda=['781506kjqGrh','8yPXNkA','default','uncaughtException',']\x20Pinging\x20node\x20','stringify','startsWith','error','\x20times\x20consecutively\x20for\x20nodeId:\x20','status','|\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Author\x20:\x20Nofan\x20Rambe\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20|','Invalid\x20JSON\x20response:\x20',',\x20Hardware\x20ID:\x20','proxy','json','/nodes/','6483253JQTlaO','Do\x20you\x20want\x20to\x20use\x20a\x20proxy?\x20(y/n):\x20','log',',\x20hardwareId:\x20',']\x20Session\x20started\x20for\x20nodeId:\x20','toLowerCase','toISOString','yellow','nodeId',']\x20Processing\x20nodeId:\x20',']\x20IP\x20fetch\x20response:',',\x20Proxy:\x20','45jgJhVD',',\x20IP:\x20','stdout','application/json','39282OQtumy','\x20is\x20already\x20being\x20processed.','readline','No\x20proxy','23nPeZNM','\x20using\x20proxy\x20','First\x20time\x20ping\x20initiate','message','add','stdin',']\x20Node\x20registration\x20completed\x20for\x20nodeId:\x20',',\x20restarting\x20process\x20in\x2050\x20seconds:\x20','close','Bearer\x20',']\x20Uncaught\x20exception:\x20','hardwareId','7001298CLzEtP','text',']\x20Ping\x20response\x20status:\x20',']\x20Failed\x20to\x20parse\x20JSON.\x20Response\x20text:','chalk',']\x20Error\x20occurred\x20for\x20nodeId:\x20','nodes','set','|\x20\x20\x20\x20\x20\x20\x20\x20Blockless\x20Bless\x20Network\x20Bot\x20\x20\x20\x20\x20\x20\x20\x20\x20|',']\x20Error\x20during\x20ping:\x20','|\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Welcome\x20&\x20Enjoy\x20Sir!\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20|','delete','green','node-fetch','promises','question','red','https://gateway-run.bls.dev/api/v1','\x20============================================',']\x20Node\x20',']\x20Ping\x20failed\x20','https-proxy-agent','2663508YeZKkp',']\x20Start\x20session\x20response:','/ping','.\x20Response:','44477540DOJLaD',',\x20NodeID:\x20','createInterface','3741172ZuEdyU',']\x20Registration\x20response:',']\x20Starting\x20session\x20for\x20node\x20',']\x20An\x20error\x20occurred:\x20',',\x20it\x20might\x20take\x20a\x20while...',']\x20Sending\x20ping\x20for\x20nodeId:\x20','POST'];_0x57d2=function(){return _0x5f2cda;};return _0x57d2();}(function(_0x1d95ae,_0x1120ab){const _0x13ea27=_0x2a3d,_0x4737b2=_0x1d95ae();while(!![]){try{const _0x1d5e1c=parseInt(_0x13ea27(0x1ba))/0x1*(-parseInt(_0x13ea27(0x1b6))/0x2)+-parseInt(_0x13ea27(0x1dc))/0x3+-parseInt(_0x13ea27(0x1e3))/0x4+-parseInt(_0x13ea27(0x206))/0x5*(parseInt(_0x13ea27(0x1ea))/0x6)+-parseInt(_0x13ea27(0x1fa))/0x7+parseInt(_0x13ea27(0x1eb))/0x8*(parseInt(_0x13ea27(0x1c6))/0x9)+parseInt(_0x13ea27(0x1e0))/0xa;if(_0x1d5e1c===_0x1120ab)break;else _0x4737b2['push'](_0x4737b2['shift']());}catch(_0x5233ad){_0x4737b2['push'](_0x4737b2['shift']());}}}(_0x57d2,0xd018e));const fs=require('fs')[_0x51ea01(0x1d4)],{HttpsProxyAgent}=require(_0x51ea01(0x1db)),{SocksProxyAgent}=require('socks-proxy-agent'),readline=require(_0x51ea01(0x1b8)),config=require('./config'),apiBaseUrl=_0x51ea01(0x1d7),ipServiceUrl='https://tight-block-2413.txlabs.workers.dev';function _0x2a3d(_0x4f17cf,_0x3502b8){const _0x57d2c8=_0x57d2();return _0x2a3d=function(_0x2a3dcd,_0x47aa79){_0x2a3dcd=_0x2a3dcd-0x1b6;let _0x51f624=_0x57d2c8[_0x2a3dcd];return _0x51f624;},_0x2a3d(_0x4f17cf,_0x3502b8);}let useProxy;const MAX_PING_ERRORS=0x3,pingInterval=0x1d4c0,restartDelay=0x3a980,processRestartDelay=0x7530;async function loadFetch(){const _0x457ad9=_0x51ea01,_0x177a35=await import(_0x457ad9(0x1d3))['then'](_0x40122d=>_0x40122d[_0x457ad9(0x1ec)]);return _0x177a35;}async function promptUseProxy(){const _0x627bd=_0x51ea01,_0x216494=readline[_0x627bd(0x1e2)]({'input':process[_0x627bd(0x1bf)],'output':process[_0x627bd(0x208)]});return new Promise(_0x670ca1=>{const _0x3fdca4=_0x627bd;_0x216494[_0x3fdca4(0x1d5)](_0x3fdca4(0x1fb),_0x50479c=>{const _0x1338a7=_0x3fdca4;_0x216494[_0x1338a7(0x1c2)](),_0x670ca1(_0x50479c[_0x1338a7(0x1ff)]()==='y');});});}async function fetchIpAddress(_0xa54172,_0x36ab2b){const _0x43e5fe=_0x51ea01,_0x1ada0e=await _0xa54172(ipServiceUrl,{'agent':_0x36ab2b}),_0x56cea3=await _0x1ada0e['json']();return console[_0x43e5fe(0x1fc)]('['+new Date()[_0x43e5fe(0x200)]()+_0x43e5fe(0x204),_0x56cea3),_0x56cea3['ip'];}async function registerNode(_0x211b52,_0x8885ee,_0x429e4f,_0x2b683d,_0x37fd1d){const _0x34888c=_0x51ea01,_0x374ad0=await loadFetch(),_0x502898=apiBaseUrl+'/nodes/'+_0x211b52;console['log']('['+new Date()[_0x34888c(0x200)]()+']\x20Registering\x20node\x20with\x20IP:\x20'+_0x429e4f+_0x34888c(0x1f6)+_0x8885ee);const _0x23469c=await _0x374ad0(_0x502898,{'method':'POST','headers':{'Content-Type':_0x34888c(0x209),'Authorization':_0x34888c(0x1c3)+_0x37fd1d},'body':JSON[_0x34888c(0x1ef)]({'ipAddress':_0x429e4f,'hardwareId':_0x8885ee}),'agent':_0x2b683d});let _0x126157;try{_0x126157=await _0x23469c[_0x34888c(0x1f8)]();}catch(_0x2a1933){const _0x1d1cfa=await _0x23469c['text']();console[_0x34888c(0x1f1)]('['+new Date()['toISOString']()+_0x34888c(0x1c9),_0x1d1cfa);throw new Error(_0x34888c(0x1f5)+_0x1d1cfa);}return console[_0x34888c(0x1fc)]('['+new Date()['toISOString']()+_0x34888c(0x1e4),_0x126157),_0x126157;}async function startSession(_0x2873e4,_0x59f48c,_0x973e63){const _0x2c0cd0=_0x51ea01,_0x4f6367=await loadFetch(),_0x46c636=apiBaseUrl+_0x2c0cd0(0x1f9)+_0x2873e4+'/start-session';console['log']('['+new Date()['toISOString']()+_0x2c0cd0(0x1e5)+_0x2873e4+_0x2c0cd0(0x1e7));const _0x58852e=await _0x4f6367(_0x46c636,{'method':'POST','headers':{'Authorization':_0x2c0cd0(0x1c3)+_0x973e63},'agent':_0x59f48c});let _0x31d28b;try{_0x31d28b=await _0x58852e['json']();}catch(_0x224d7c){const _0x51603c=await _0x58852e['text']();console[_0x2c0cd0(0x1f1)]('['+new Date()[_0x2c0cd0(0x200)]()+_0x2c0cd0(0x1c9),_0x51603c);throw new Error(_0x2c0cd0(0x1f5)+_0x51603c);}return console['log']('['+new Date()[_0x2c0cd0(0x200)]()+_0x2c0cd0(0x1dd),_0x31d28b),_0x31d28b;}async function pingNode(_0x20e961,_0x2c22ea,_0x157179,_0x261f17,_0x3f7244){const _0x4880e3=_0x51ea01,_0x1541d2=await loadFetch(),_0x150602=await import(_0x4880e3(0x1ca)),_0x593c7a=apiBaseUrl+_0x4880e3(0x1f9)+_0x20e961+_0x4880e3(0x1de),_0x3b74c4=_0x2c22ea?JSON[_0x4880e3(0x1ef)](_0x2c22ea['proxy']):_0x4880e3(0x1b9);console[_0x4880e3(0x1fc)]('['+new Date()[_0x4880e3(0x200)]()+_0x4880e3(0x1ee)+_0x20e961+_0x4880e3(0x1bb)+_0x3b74c4);const _0x2f7efd=await _0x1541d2(_0x593c7a,{'method':_0x4880e3(0x1e9),'headers':{'Authorization':'Bearer\x20'+_0x261f17},'agent':_0x2c22ea});let _0x5d2b8c;try{_0x5d2b8c=await _0x2f7efd[_0x4880e3(0x1f8)]();}catch(_0x4e5191){const _0x4d9459=await _0x2f7efd[_0x4880e3(0x1c7)]();console[_0x4880e3(0x1f1)]('['+new Date()[_0x4880e3(0x200)]()+_0x4880e3(0x1c9),_0x4d9459),_0x3f7244[_0x20e961]=(_0x3f7244[_0x20e961]||0x0)+0x1;throw new Error('Invalid\x20JSON\x20response:\x20'+_0x4d9459);}if(!_0x5d2b8c[_0x4880e3(0x1f3)])console[_0x4880e3(0x1fc)]('['+new Date()[_0x4880e3(0x200)]()+']\x20'+_0x150602[_0x4880e3(0x1ec)][_0x4880e3(0x1d2)](_0x4880e3(0x1bc))+_0x4880e3(0x1e1)+_0x150602[_0x4880e3(0x1ec)]['cyan'](_0x20e961)+_0x4880e3(0x205)+_0x150602[_0x4880e3(0x1ec)]['yellow'](_0x3b74c4)+_0x4880e3(0x207)+_0x150602[_0x4880e3(0x1ec)]['yellow'](_0x157179));else{let _0x32df30=_0x5d2b8c[_0x4880e3(0x1f3)][_0x4880e3(0x1ff)]()==='ok'?_0x150602[_0x4880e3(0x1ec)]['green']:_0x150602['default'][_0x4880e3(0x1d6)];const _0x1e64d0='['+new Date()['toISOString']()+_0x4880e3(0x1c8)+_0x32df30(_0x5d2b8c[_0x4880e3(0x1f3)]['toUpperCase']())+',\x20NodeID:\x20'+_0x150602['default']['cyan'](_0x20e961)+_0x4880e3(0x205)+_0x150602[_0x4880e3(0x1ec)][_0x4880e3(0x201)](_0x3b74c4)+_0x4880e3(0x207)+_0x150602[_0x4880e3(0x1ec)][_0x4880e3(0x201)](_0x157179);console[_0x4880e3(0x1fc)](_0x1e64d0);}return _0x3f7244[_0x20e961]=0x0,_0x5d2b8c;}async function displayHeader(){const _0x52c252=_0x51ea01,_0x980180=await import(_0x52c252(0x1ca));console[_0x52c252(0x1fc)](''),console[_0x52c252(0x1fc)](_0x980180[_0x52c252(0x1ec)][_0x52c252(0x201)](_0x52c252(0x1d8))),console['log'](_0x980180[_0x52c252(0x1ec)][_0x52c252(0x201)](_0x52c252(0x1ce))),console[_0x52c252(0x1fc)](_0x980180[_0x52c252(0x1ec)][_0x52c252(0x201)](_0x52c252(0x1f4))),console[_0x52c252(0x1fc)](_0x980180[_0x52c252(0x1ec)]['yellow'](_0x52c252(0x1d0))),console[_0x52c252(0x1fc)](_0x980180[_0x52c252(0x1ec)][_0x52c252(0x201)]('\x20============================================')),console[_0x52c252(0x1fc)]('');}const activeNodes=new Set(),nodeIntervals=new Map();async function processNode(_0x1f1e9e,_0x472eaf,_0x2e5f05,_0x5aa04e){const _0xf03d3c=_0x51ea01,_0x42e132={};let _0x146d5e=null;while(!![]){try{if(activeNodes['has'](_0x1f1e9e['nodeId'])){console['log']('['+new Date()[_0xf03d3c(0x200)]()+_0xf03d3c(0x1d9)+_0x1f1e9e[_0xf03d3c(0x202)]+_0xf03d3c(0x1b7));return;}activeNodes[_0xf03d3c(0x1be)](_0x1f1e9e[_0xf03d3c(0x202)]),console[_0xf03d3c(0x1fc)]('['+new Date()[_0xf03d3c(0x200)]()+_0xf03d3c(0x203)+_0x1f1e9e[_0xf03d3c(0x202)]+_0xf03d3c(0x1fd)+_0x1f1e9e[_0xf03d3c(0x1c5)]+',\x20IP:\x20'+_0x2e5f05);const _0x1a06c6=await registerNode(_0x1f1e9e[_0xf03d3c(0x202)],_0x1f1e9e[_0xf03d3c(0x1c5)],_0x2e5f05,_0x472eaf,_0x5aa04e);console['log']('['+new Date()[_0xf03d3c(0x200)]()+_0xf03d3c(0x1c0)+_0x1f1e9e['nodeId']+'.\x20Response:',_0x1a06c6);const _0x2b8bb0=await startSession(_0x1f1e9e[_0xf03d3c(0x202)],_0x472eaf,_0x5aa04e);console[_0xf03d3c(0x1fc)]('['+new Date()['toISOString']()+_0xf03d3c(0x1fe)+_0x1f1e9e[_0xf03d3c(0x202)]+_0xf03d3c(0x1df),_0x2b8bb0),console[_0xf03d3c(0x1fc)]('['+new Date()[_0xf03d3c(0x200)]()+']\x20Sending\x20initial\x20ping\x20for\x20nodeId:\x20'+_0x1f1e9e['nodeId']),await pingNode(_0x1f1e9e[_0xf03d3c(0x202)],_0x472eaf,_0x2e5f05,_0x5aa04e,_0x42e132);!nodeIntervals['has'](_0x1f1e9e[_0xf03d3c(0x202)])&&(_0x146d5e=setInterval(async()=>{const _0x4c7576=_0xf03d3c;try{console[_0x4c7576(0x1fc)]('['+new Date()[_0x4c7576(0x200)]()+_0x4c7576(0x1e8)+_0x1f1e9e[_0x4c7576(0x202)]),await pingNode(_0x1f1e9e[_0x4c7576(0x202)],_0x472eaf,_0x2e5f05,_0x5aa04e,_0x42e132);}catch(_0x5c1c7f){console[_0x4c7576(0x1f1)]('['+new Date()[_0x4c7576(0x200)]()+_0x4c7576(0x1cf)+_0x5c1c7f[_0x4c7576(0x1bd)]),_0x42e132[_0x1f1e9e['nodeId']]=(_0x42e132[_0x1f1e9e[_0x4c7576(0x202)]]||0x0)+0x1;_0x42e132[_0x1f1e9e['nodeId']]>=MAX_PING_ERRORS&&(clearInterval(nodeIntervals['get'](_0x1f1e9e[_0x4c7576(0x202)])),nodeIntervals[_0x4c7576(0x1d1)](_0x1f1e9e[_0x4c7576(0x202)]),activeNodes[_0x4c7576(0x1d1)](_0x1f1e9e[_0x4c7576(0x202)]),console['error']('['+new Date()[_0x4c7576(0x200)]()+_0x4c7576(0x1da)+MAX_PING_ERRORS+_0x4c7576(0x1f2)+_0x1f1e9e['nodeId']+'.\x20Restarting\x20process...'),await new Promise(_0x393dd2=>setTimeout(_0x393dd2,processRestartDelay)),await processNode(_0x1f1e9e,_0x472eaf,_0x2e5f05,_0x5aa04e));throw _0x5c1c7f;}},pingInterval),nodeIntervals[_0xf03d3c(0x1cd)](_0x1f1e9e[_0xf03d3c(0x202)],_0x146d5e));break;}catch(_0x4a281d){console[_0xf03d3c(0x1f1)]('['+new Date()['toISOString']()+_0xf03d3c(0x1cb)+_0x1f1e9e[_0xf03d3c(0x202)]+_0xf03d3c(0x1c1)+_0x4a281d['message']),await new Promise(_0x2be7db=>setTimeout(_0x2be7db,restartDelay));}finally{activeNodes[_0xf03d3c(0x1d1)](_0x1f1e9e[_0xf03d3c(0x202)]);}}}async function runAll(_0x28f289=!![]){const _0x323497=_0x51ea01;try{_0x28f289&&(await displayHeader(),useProxy=await promptUseProxy());for(const _0x4d4e07 of config){for(const _0x231dbe of _0x4d4e07[_0x323497(0x1cc)]){let _0x57295e=null;if(useProxy&&_0x231dbe[_0x323497(0x1f7)]){if(_0x231dbe[_0x323497(0x1f7)][_0x323497(0x1f0)]('socks'))_0x57295e=new SocksProxyAgent(_0x231dbe[_0x323497(0x1f7)]);else{const _0xc81e7a=_0x231dbe[_0x323497(0x1f7)][_0x323497(0x1f0)]('http')?_0x231dbe[_0x323497(0x1f7)]:'http://'+_0x231dbe[_0x323497(0x1f7)];_0x57295e=new HttpsProxyAgent(_0xc81e7a);}}const _0x50bb73=useProxy?await fetchIpAddress(await loadFetch(),_0x57295e):null;processNode(_0x231dbe,_0x57295e,_0x50bb73,_0x4d4e07['usertoken']);}}}catch(_0x568048){const _0x2b5e61=await import('chalk');console[_0x323497(0x1f1)](_0x2b5e61[_0x323497(0x1ec)]['yellow']('['+new Date()[_0x323497(0x200)]()+_0x323497(0x1e6)+_0x568048[_0x323497(0x1bd)]));}}process['on'](_0x51ea01(0x1ed),_0x2371c5=>{const _0x1b6acd=_0x51ea01;console['error']('['+new Date()[_0x1b6acd(0x200)]()+_0x1b6acd(0x1c4)+_0x2371c5[_0x1b6acd(0x1bd)]),runAll(![]);}),runAll();
